@import '../tokens';
@import '../typography';
@import '../grid'; // For using container or row/col if needed

// Main Application Header
.app-header {
  background-color: var(--primary-color);
  color: var(--text-color-on-primary);
  padding: $spacing-md 0;
  box-shadow: var(--box-shadow);
  transition: background-color $default-transition-duration $default-transition-timing-function,
              color $default-transition-duration $default-transition-timing-function,
              box-shadow $default-transition-duration $default-transition-timing-function;
  // position: fixed;
  // top: 0;
  // left: 0;
  // right: 0;
  // z-index: 1030; // Ensure it's above other content if fixed

  // Container for content within the header to align with page layout
  .container, .container-fluid {
    display: flex;
    align-items: center;
    justify-content: space-between; // Example: Logo on left, nav/actions on right
  }

  // Site Title / Logo area
  .header-brand {
    // font-size: $font-size-xl; // Applied to h1 directly
    // font-weight: $font-weight-bold; // Applied to h1 directly
    // color: #fff; // Applied to h1 directly
    text-decoration: none;
    margin-right: $spacing-lg; // Space between brand and navigation

    h1 {
      font-size: $font-size-xl;
      font-weight: $font-weight-bold;
      color: inherit;
      margin: 0;
      line-height: 1.2;
      transition: color $default-transition-duration $default-transition-timing-function; // For hover effect
    }

    &:hover h1, &:focus h1 {
      color: var(--text-color-on-primary-hover, #{darken(#fff, 15%)});
    }
  }

  // Navigation within header
  .header-nav {
    ul {
      list-style: none;
      padding-left: 0;
      margin-bottom: 0;
      display: flex; // Align nav items horizontally
      align-items: center;
    }

    li {
      margin-left: $spacing-md; // Spacing between nav items
    }

    a {
      color: #fff; // Nav link color
      text-decoration: none;
      font-size: $font-size-base;
      padding: $spacing-sm $spacing-xs; // Padding for clickable area

      &:hover, &.active {
        color: darken(#fff, 15%); // Darken on hover or for active link
        // border-bottom: 2px solid #fff; // Example active/hover indicator
      }
    }
  }

  // Header actions (e.g., user profile, buttons)
  .header-actions {
    display: flex;
    align-items: center;

    // span { // Old style for direct span, now replaced by .connection-status-indicator
    //   font-size: $font-size-sm;
    //   color: $light-gray;
    // }

    .connection-status-indicator {
      display: flex;
      align-items: center;
      padding: $spacing-xs $spacing-sm;
      border-radius: $border-radius;
      // background-color: rgba(255,255,255, 0.08); // Optional: subtle background on dark header
      // transition for potential background color changes, though not strictly needed if only icon/text color changes
      transition: background-color $default-transition-duration $default-transition-timing-function;


      .connection-status-icon {
        margin-right: $spacing-xs;
        font-size: $font-size-lg;
        transition: color $default-transition-duration $default-transition-timing-function;
      }

      .connection-status-text {
        font-size: $font-size-sm;
        font-weight: $font-weight-normal;
        color: inherit;
        // Text color itself doesn't change per state here, only icon
      }

      &.connected .connection-status-icon {
        color: var(--success-color);
      }

      &.disconnected .connection-status-icon {
        color: var(--danger-color);
      }
    }

    .btn {
      margin-left: $spacing-sm;
      // Button transitions are handled by .btn styles in buttons.scss
      // Ensure text/border colors for outline/link buttons adapt to header's dark bg
      &.btn-outline-primary, &.btn-link {
         color: var(--text-color-on-primary); // Use text color defined for elements on primary bg
         border-color: var(--text-color-on-primary);
         &:hover {
            // Use a specific var for this hover if defined, or a subtle rgba
            background-color: var(--surface-hover-on-primary, #{rgba(#fff, 0.1)});
            color: var(--text-color-on-primary);
            border-color: var(--text-color-on-primary);
         }
      }
    }
    .user-profile {
      margin-left: $spacing-md;
      // Style for user avatar, name, etc.
    }
  }
}

// Responsive considerations for header (example)
@media (max-width: $breakpoint-md) {
  .app-header {
    .container, .container-fluid {
      flex-direction: column; // Stack elements vertically on smaller screens
      align-items: flex-start;
    }

    .header-brand {
      margin-bottom: $spacing-sm; // Add space below brand when stacked
    }

    .header-nav {
      width: 100%; // Make nav take full width
      ul {
        flex-direction: column; // Stack nav items
        align-items: flex-start;
      }
      li {
        margin-left: 0;
        margin-bottom: $spacing-xs; // Space between stacked nav items
        width: 100%;
      }
      a {
        display: block; // Make links full width for easier tapping
        padding: $spacing-sm 0;
      }
    }

    .header-actions {
      width: 100%;
      margin-top: $spacing-sm;
      // Adjust layout of actions if needed
    }
  }
}
