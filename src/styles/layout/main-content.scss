@import '../tokens';
@import '../grid'; // For .container or row/col usage within main content

// Main Content Area
.main-content {
  padding: $spacing-lg;
  // background-color: var(--background-color-main); // Assuming this is the main content area background
  // transition: background-color $default-transition-duration $default-transition-timing-function;
  // The body already has this background, so main-content might not need its own unless it's visually distinct.
  // For now, no direct background set here, it will be transparent to body's background.

  // Default for mobile (stacks, takes full width)
  width: 100%;
  flex-basis: 100%; // Ensure it takes full width when stacked on small screens
  min-width: 0; // Allow shrinking

  @media (min-width: $breakpoint-md) { // Medium screens and up
    flex-grow: 1;
    flex-basis: 0; // Allow it to grow from 0, taking remaining space
    // width: auto; // Not needed if flex-grow is 1
    // min-width: 0; // Already set above, good for flex children
  }

  // When sidebar is collapsed (assuming a class `sidebar-collapsed` on a parent, e.g., <body>)
  // This example assumes the sidebar width changes, and main-content margin adjusts.
  // body.sidebar-collapsed & { // Using `&` to refer to .main-content
  //   margin-left: 80px; // Same as collapsed sidebar width
  // }

  // When sidebar is collapsed, main-content should expand to fill available space
  .app.sidebar-collapsed & {
    @media (min-width: $breakpoint-md) {
      // When sidebar is collapsed to 80px, main-content flex-grows into the space.
      // The explicit width: calc(100% - 80px) might not be needed if flex properties are set correctly on all siblings in the row.
      // width: calc(100% - 80px);
      // flex-grow: 1; (already set for md+)
    }
  }
}

// If you want a container within the main content area to constrain its width
.main-content .container, // This will apply within the expanded main-content area
.main-content .container-fluid {
  // Styles for the container within main-content, if different from default grid container
  // For example, you might want a max-width for the content area itself,
  // even if the .main-content wrapper spans a wider area for other purposes.
  // max-width: 1200px; // Example max-width for content
  // margin-left: auto;
  // margin-right: auto;
}

.workspace {
  // From original .main-app-area in App.scss, adjusted for typical content flow
  display: flex;
  flex-direction: column; // Stack primary-content and media-container vertically
  flex-grow: 1; // Takes available vertical space in main-content if main-content is flex column
  // align-items: center; // Original, might want to change to stretch or flex-start
  // justify-content: center; // Original, might want to change to flex-start
  align-items: stretch; // Stretch children to fill width
  justify-content: flex-start; // Align children to the top
  padding: $spacing-lg; // Added padding for the workspace area
  gap: $spacing-lg; // Added gap between direct children (.primary-content, .media-container)

  // Ensure children can take full width if needed, or define their own widths
  .primary-content {
    // Example: could have its own background, padding, etc.
    // background-color: var(--surface-color);
    // padding: $spacing-md;
    // border-radius: $border-radius;
  }

  .media-container {
    // Example: ensure it doesn't shrink if primary-content is large
    // flex-shrink: 0; // If primary-content could push it too small
    flex-grow: 1; // Allows it to take available vertical space in the workspace
    display: flex; // Needed to manage video element's size/alignment within
    flex-direction: column; // Stack video and controls
    justify-content: center; // Center video vertically if it doesn't fill height
    align-items: center; // Center video horizontally
    min-height: 200px;
    background-color: var(--surface-color);
    padding: $spacing-md;
    border-radius: var(--border-radius, $border-radius);
    border: var(--border-width, $border-width) solid var(--border-color);
    transition: background-color $default-transition-duration $default-transition-timing-function,
                border-color $default-transition-duration $default-transition-timing-function;
  }

  .primary-content {
    background-color: var(--surface-color);
    padding: $spacing-md;
    border-radius: var(--border-radius, $border-radius);
    border: var(--border-width, $border-width) solid var(--border-color);
    transition: background-color $default-transition-duration $default-transition-timing-function,
                border-color $default-transition-duration $default-transition-timing-function;

    h2 {
      margin-top: 0;
      margin-bottom: $spacing-md;
    }
    // Add styles for h3, p within primary-content if needed
  }
}

// Responsive adjustments for main content
@media (max-width: ($breakpoint-md - 1px)) { // Small screens, ensure it takes full width
  .main-content {
    padding: $spacing-md; // Keep reduced padding for small screens
    flex-basis: 100% !important;
    width: 100% !important;
    max-width: 100% !important;
    flex-grow: 0 !important; // Don't grow, rely on 100% width
  }
}

// Example for a layout where sidebar is part of a flex container with main content
// This would typically be set on the parent of both .app-sidebar and .main-content
// .app-layout {
//   display: flex;
// }
//
// .main-content {
//   flex-grow: 1;
//   margin-left: 0; // No margin needed if flex handles positioning
//   // padding-top for fixed header would still apply
// }
//
// body.sidebar-collapsed .app-sidebar {
//    width: 80px; /* This is already in sidebar.scss */
// }
// No change needed for .main-content margin-left if using flex grow,
// as the sidebar's shrink/growth will be handled by flexbox.

// It's important to decide on a layout strategy:
// 1. Fixed sidebar, main content has margin.
// 2. Flexbox layout for sidebar and main content.
// 3. Sidebar is off-canvas on some/all screen sizes.
// The SCSS here provides placeholders for the first option, with notes for others.
// The actual implementation will depend on the HTML structure and overall layout approach.
