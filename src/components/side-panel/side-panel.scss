// SCSS for SidePanel component - internal layout and content visibility
@import '../../styles/tokens';
@import '../../styles/animations'; // For transition variables

.side-panel {
  background-color: var(--surface-color);
  display: flex;
  flex-direction: column;
  height: 100%;
  overflow: hidden;
  font-family: $font-family-base;
  color: var(--text-on-surface-color);
  font-size: $font-size-sm;
  line-height: $line-height-base;
  transition: background-color $default-transition-duration $default-transition-timing-function,
              color $default-transition-duration $default-transition-timing-function;

  .hidden {
    display: none !important;
  }

  // Transitions for sections when opening/closing
  &.open {
    .top h2,
    .log-tabs,
    .log-search-toolbar,
    .indicators,
    .side-panel-container,
    .input-container,
    .indicators .streaming-indicator span.text {
      opacity: 1;
      visibility: visible;
      transition: opacity 0.2s $default-transition-timing-function 0.1s,
                  visibility 0s linear 0.1s,
                  height 0.2s $default-transition-timing-function 0.1s,
                  margin 0.2s $default-transition-timing-function 0.1s,
                  padding 0.2s $default-transition-timing-function 0.1s;
    }

    .log-tabs, .log-search-toolbar {
      height: auto;
    }
  }

  &.collapsed {
    .top h2,
    .log-tabs,
    .log-search-toolbar,
    .indicators,
    .side-panel-container,
    .input-container,
    .indicators .streaming-indicator span.text {
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.1s $default-transition-timing-function,
                  visibility 0s linear 0.1s,
                  height 0.1s $default-transition-timing-function,
                  margin 0.1s $default-transition-timing-function,
                  padding 0.1s $default-transition-timing-function;
    }

    .log-tabs, .log-search-toolbar {
      height: 0;
      margin-bottom: 0;
      padding-top: 0;
      padding-bottom: 0;
      overflow: hidden;
    }
    .log-tabs {
        border-bottom-width: 0;
    }
  }

  // --- Sections Styling ---
  .top {
    display: flex;
    width: 100%;
    justify-content: space-between;
    align-items: center;
    padding: $spacing-md $spacing-sm;
    border-bottom: var(--border-width, $border-width) solid var(--border-color);
    flex-shrink: 0;
    transition: border-color $default-transition-duration $default-transition-timing-function;

    h2 {
      color: var(--text-on-surface-color);
      font-size: $font-size-lg;
      font-weight: $font-weight-bold;
      line-height: $line-height-base;
      margin: 0;
      opacity: 1;
      transition: opacity 0.2s $default-transition-timing-function 0.1s, // For collapse
                  color $default-transition-duration $default-transition-timing-function; // For theme change
    }
  }

  .opener {
    background: transparent;
    border: 0;
    cursor: pointer;
    color: var(--text-on-surface-color);
    font-size: 1.5rem;
    padding: $spacing-xs;
    height: auto;
    transition: transform 0.2s $default-transition-timing-function,
                color $default-transition-duration $default-transition-timing-function;
  }

  .log-tabs {
    display: flex;
    border-bottom: 1px solid var(--border-color);
    flex-shrink: 0;
    padding: 0 $spacing-sm;
    opacity: 1;
    visibility: visible;
    height: auto;
    transition: opacity 0.2s $default-transition-timing-function 0.1s,
                visibility 0s linear 0.1s,
                height 0.2s $default-transition-timing-function 0.1s,
                margin 0.2s $default-transition-timing-function 0.1s,
                padding 0.2s $default-transition-timing-function 0.1s,
                border-color $default-transition-duration $default-transition-timing-function;
  }

  .log-tab-button {
    padding: $spacing-sm $spacing-md;
    border: none;
    background-color: transparent;
    cursor: pointer;
    color: var(--text-muted-on-surface-color); // Side panel is a surface
    font-size: $font-size-base;
    font-family: $font-family-base;
    position: relative;
    transition: color $default-transition-duration $default-transition-timing-function;
    margin-bottom: -1px;

    &:hover {
      color: var(--text-color);
    }

    &.active {
      color: var(--primary-color);
      font-weight: $font-weight-bold;
      &::after {
        content: '';
        position: absolute;
        bottom: 0; left: 0; right: 0;
        height: 2px;
        background-color: var(--primary-color);
      }
    }

    &:focus-visible {
      outline: 2px solid var(--primary-color, $primary-color);
      outline-offset: -2px; // Adjust to be inside or just on the edge
      // Or use box-shadow for a different style:
      // box-shadow: 0 0 0 2px var(--background-color, $white), 0 0 0 4px var(--primary-color, $primary-color);
    }
  }

  .log-search-toolbar {
    padding: $spacing-sm $spacing-sm $spacing-md $spacing-sm;
    flex-shrink: 0;
    opacity: 1;
    visibility: visible;
    height: auto;
    transition: opacity 0.2s $default-transition-timing-function 0.1s,
                visibility 0s linear 0.1s,
                height 0.2s $default-transition-timing-function 0.1s,
                margin 0.2s $default-transition-timing-function 0.1s,
                padding 0.2s $default-transition-timing-function 0.1s;
  }

  .search-input-wrapper {
    position: relative;
    display: flex;
    align-items: center;
  }

  .log-search-input {
    width: 100%;
    padding: $spacing-sm;
    padding-right: $spacing-xl;
    border: 1px solid var(--input-border-color);
    border-radius: var(--border-radius, $border-radius);
    font-size: $font-size-base;
    background-color: var(--input-background-color);
    color: var(--input-text-color);
    line-height: $line-height-base;
    transition: border-color $default-transition-duration $default-transition-timing-function,
                background-color $default-transition-duration $default-transition-timing-function,
                color $default-transition-duration $default-transition-timing-function,
                box-shadow $default-transition-duration $default-transition-timing-function;

    &::placeholder {
      color: var(--input-placeholder-color);
    }
    &:focus {
      border-color: var(--input-focus-border-color);
      outline: none;
      box-shadow: var(--input-focus-box-shadow);
    }
  }

  .clear-search-button {
    position: absolute;
    right: $spacing-xs;
    top: 50%;
    transform: translateY(-50%);
    background: transparent;
    border: none;
    color: var(--text-muted-on-surface-color); // Side panel is a surface
    cursor: pointer;
    font-size: $font-size-lg;
    padding: $spacing-xs;
    line-height: 1;
    transition: color $default-transition-duration $default-transition-timing-function;
    &:hover {
      color: var(--text-color);
    }
  }

  .indicators {
    display: flex;
    padding: $spacing-md $spacing-sm;
    justify-content: flex-end;
    gap: $spacing-md;
    flex-shrink: 0;
    align-items: center;
    opacity: 1;
    visibility: visible;
    height: auto;
    transition: opacity 0.2s $default-transition-timing-function 0.1s,
                visibility 0s linear 0.1s,
                height 0.2s $default-transition-timing-function 0.1s,
                padding 0.2s $default-transition-timing-function 0.1s;

    .streaming-indicator {
      user-select: none;
      border-radius: var(--border-radius, $border-radius);
      border: var(--border-width, $border-width) solid var(--border-color);
      background: var(--surface-color);
      display: flex;
      padding: $spacing-xs $spacing-sm;
      justify-content: center;
      align-items: center;
      gap: $spacing-xs;
      flex-shrink: 0;
      text-align: center;
      font-size: $font-size-sm;
      color: var(--text-on-surface-color);
      transition: opacity 0.2s $default-transition-timing-function 0.1s,
                  background-color $default-transition-duration $default-transition-timing-function,
                  border-color $default-transition-duration $default-transition-timing-function,
                  color $default-transition-duration $default-transition-timing-function;

      &.connected {
        // color: var(--primary-color); // Example if text turns blue when connected
      }

      span.text {
        opacity: 1;
        transition: opacity 0.2s $default-transition-timing-function 0.1s;
      }
    }
  }

  .side-panel-container {
    width: 100%;
    flex-grow: 1;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    opacity: 1;
    visibility: visible;
    height: auto;
    // No direct bg/color here, it's a container for Logger panel

    > .logger.panel {
      flex-grow: 1;
      min-height: 0;
      background-color: var(--background-color-main);
      transition: background-color $default-transition-duration $default-transition-timing-function;
    }
  }

  .input-container {
    flex-shrink: 0;
    border-top: var(--border-width, $border-width) solid var(--border-color);
    padding: $spacing-md $spacing-sm;
    overflow: hidden;
    background-color: var(--surface-color);
    opacity: 1;
    visibility: visible;
    height: auto;
    transition: background-color $default-transition-duration $default-transition-timing-function,
                border-color $default-transition-duration $default-transition-timing-function,
                opacity 0.2s $default-transition-timing-function 0.1s,
                visibility 0s linear 0.1s,
                height 0.2s $default-transition-timing-function 0.1s,
                padding 0.2s $default-transition-timing-function 0.1s;


    .input-content {
      position: relative;
      background: var(--input-background-color);
      border: var(--border-width, $border-width) solid var(--input-border-color);
      border-radius: var(--border-radius, $border-radius);
      padding: $spacing-sm;
      display: flex;
      align-items: flex-end;
      gap: $spacing-sm;
      transition: background-color $default-transition-duration $default-transition-timing-function,
                  border-color $default-transition-duration $default-transition-timing-function;


      .input-area {
        flex-grow: 1;
        width: 100%;
        background-color: transparent;
        color: var(--input-text-color);
        border: none;
        padding: $spacing-xs;
        font-family: $font-family-base;
        font-size: $font-size-base;
        line-height: $line-height-base;
        resize: none;
        overflow-y: hidden;
        min-height: 2.5rem;
        transition: color $default-transition-duration $default-transition-timing-function;


        &::placeholder { // Added placeholder styling
            color: var(--input-placeholder-color);
        }
        &:focus {
          outline: none;
        }
      }

      .input-content-placeholder {
        position: absolute;
        left: $spacing-sm + $spacing-xs;
        top: $spacing-sm + $spacing-xs;
        pointer-events: none;
        user-select: none;
        white-space: pre-wrap;
        color: var(--input-placeholder-color);
        transition: color $default-transition-duration $default-transition-timing-function;
      }
      // Send button (ControlButton) is styled by its own SCSS
    }
  }
}
